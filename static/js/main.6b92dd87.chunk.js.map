{"version":3,"sources":["Modal/Modal.module.css","ImageGalleryItem/ImageGalleryItem.module.css","ImageGallery/ImageGallery.module.css","Button/Button.module.css","Searchbar/Searchbar.js","Modal/Modal.js","ImageGalleryItem/ImageGalleryItem.js","ImageGallery/ImageGallery.js","service/img-api.js","Loader/Loader.js","StatusError/StatusError.js","Button/Button.js","RenderGallery/RenderGallery.js","App.js","index.js","Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","image","handleNameChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","getImg","toast","warn","className","s","SearchForm","onSubmit","this","type","SearchFormButton","style","marginRight","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","console","log","window","addEventListener","removeEventListener","src","alt","createPortal","Overlay","onClick","ModalImg","ImageGalleryItem","showModal","toggleModal","modalImg","ImageGalleryItemImage","ImageGallery","images","ItemList","map","webformatURL","tags","largeImageURL","id","api","fetchImages","name","page","fetch","then","response","ok","json","Promise","reject","Error","ImagePendingView","color","height","width","StatusError","message","role","Button","scrollPageOnBtnMore","scroll","scrollToBottom","RenderGallery","error","status","onClickLoadMoreBtn","prevState","prevProps","prevImg","imgItem","nextImg","prevPage","nextPage","imgAPI","newImages","total","hits","catch","textAlign","App","handleFormSubmit","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6b92dd87.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1o7KA\",\"ModalImg\":\"Modal_ModalImg__3A-8e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3B_xp\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3dFBl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ItemList\":\"ImageGallery_ItemList__3-F0u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3_qJh\"};","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { BiSearchAlt } from 'react-icons/bi';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport s from '../Searchbar/Searchbar.module.css';\r\n\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    image: '',\r\n  };\r\n\r\n  //получение значения input\r\n  handleNameChange = e => {\r\n    this.setState({ image: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  //отправка значения из формы\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    if (this.state.image.trim() === '') {\r\n      toast.warn('Заполните форму поиска');\r\n      return;\r\n    }\r\n\r\n    this.props.getImg(this.state.image);\r\n    this.setState({ image: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <BiSearchAlt style={{ marginRight: 8 }} />\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.image}\r\n            onChange={this.handleNameChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { createPortal } from 'react-dom';\r\nimport s from '../Modal/Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    src: PropTypes.string.isRequired,\r\n    alt: PropTypes.string.isRequired,\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log('Modal componentDidMount');\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    console.log('Modal componentWillUnmount');\r\n\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={s.Modal}>\r\n          <img className={s.ModalImg} src={src} alt={alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from '../ImageGalleryItem/ImageGalleryItem.module.css';\r\nimport Modal from '../Modal/Modal';\r\n\r\nexport default class ImageGalleryItem extends Component {\r\n  state = {\r\n    showModal: false,\r\n  };\r\n\r\n  static propTypes = {\r\n    src: PropTypes.string.isRequired,\r\n    alt: PropTypes.string.isRequired,\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\r\n  };\r\n\r\n  render() {\r\n    const { showModal } = this.state;\r\n    const { src, alt, modalImg } = this.props;\r\n    return (\r\n      <li className={s.ImageGalleryItem}>\r\n        <img\r\n          onClick={this.toggleModal}\r\n          src={src}\r\n          alt={alt}\r\n          className={s.ImageGalleryItemImage}\r\n        />\r\n        {showModal && (\r\n          <Modal onClose={this.toggleModal} src={modalImg} alt={alt} />\r\n        )}\r\n      </li>\r\n    );\r\n  }\r\n}\r\n","import s from '../ImageGallery/ImageGallery.module.css';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function ImageGallery({ images }) {\r\n  return (\r\n    <ul className={s.ItemList}>\r\n      {images.map(image => (\r\n        <ImageGalleryItem\r\n          src={image.webformatURL}\r\n          alt={image.tags}\r\n          modalImg={image.largeImageURL}\r\n          key={image.id}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.array.isRequired,\r\n};\r\n","function fetchImages(name, page) {\r\n  const KEY = '19029120-3d5d472043b9b4c189da88885';\r\n\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${name}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n\r\n    return Promise.reject(new Error('Ошибка'));\r\n  });\r\n}\r\n\r\nconst api = { fetchImages };\r\n\r\nexport default api;\r\n","import Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nexport default function ImagePendingView() {\r\n  return <Loader type=\"Grid\" color=\"#00BFFF\" height={80} width={80} />;\r\n}\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default function StatusError({ message }) {\r\n  return (\r\n    <div role=\"alert\">\r\n      <p>Что-то пошло не так. {message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nStatusError.propTypes = {\r\n  message: PropTypes.string.isRequired,\r\n};\r\n","import { Component } from 'react';\r\nimport { animateScroll as scroll } from 'react-scroll';\r\nimport s from '../Button/Button.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class Button extends Component {\r\n  static propTypes = {\r\n    onClick: PropTypes.func.isRequired,\r\n  };\r\n\r\n  scrollPageOnBtnMore = () => {\r\n    this.props.onClick();\r\n    scroll.scrollToBottom();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <button\r\n        onClick={this.scrollPageOnBtnMore}\r\n        className={s.Button}\r\n        type=\"button\"\r\n      >\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGallery from '../ImageGallery/ImageGallery';\r\nimport imgAPI from '../service/img-api';\r\nimport Loader from '../Loader/Loader';\r\nimport StatusError from '../StatusError/StatusError';\r\nimport Button from '../Button/Button';\r\n\r\nexport default class RenderGallery extends Component {\r\n  state = {\r\n    images: [],\r\n    error: null,\r\n    status: 'idle',\r\n    page: 1,\r\n  };\r\n\r\n  static propTypes = {\r\n    imageName: PropTypes.string,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevImg = prevProps.imgItem;\r\n    const nextImg = this.props.imgItem;\r\n    const prevPage = prevState.page;\r\n    const nextPage = this.state.page;\r\n    console.log(nextPage);\r\n\r\n    if (prevImg !== nextImg) {\r\n      this.setState({ page: 1 });\r\n    }\r\n\r\n    if (prevImg !== nextImg || prevPage !== nextPage) {\r\n      this.setState({ status: 'pending' });\r\n\r\n      imgAPI\r\n        .fetchImages(nextImg, nextPage)\r\n        .then(newImages => {\r\n          if (newImages.total !== 0) {\r\n            this.setState(prevState => ({\r\n              images: [...prevState.images, ...newImages.hits],\r\n              status: 'resolved',\r\n            }));\r\n            return;\r\n          }\r\n\r\n          return Promise.reject(new Error('Invalid request'));\r\n        })\r\n        .catch(error => this.setState({ error, status: 'rejected' }));\r\n    }\r\n  }\r\n\r\n  onClickLoadMoreBtn = () => {\r\n    // console.log('больше');\r\n    this.setState(prevState => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { error, status, images } = this.state;\r\n\r\n    if (status === 'idle') {\r\n      return <p style={{ textAlign: 'center' }}>Давай что-то найдем</p>;\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return <Loader />;\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return <StatusError message={error.message} />;\r\n    }\r\n\r\n    if (status === 'resolved') {\r\n      return (\r\n        <>\r\n          <ImageGallery images={this.state.images} />\r\n          <Button onClick={this.onClickLoadMoreBtn} />\r\n        </>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searchbar from './Searchbar/Searchbar';\nimport RenderGallery from './RenderGallery/RenderGallery';\n\nexport default class App extends Component {\n  state = {\n    image: '',\n  };\n\n  handleFormSubmit = image => {\n    this.setState({ image });\n  };\n\n  render() {\n    return (\n      <div>\n        <Searchbar getImg={this.handleFormSubmit} />\n        <RenderGallery imgItem={this.state.image} />\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2nlN4\",\"SearchForm\":\"Searchbar_SearchForm__VfF_Z\",\"SearchFormButton\":\"Searchbar_SearchFormButton__2P3t8\",\"SearchFormInput\":\"Searchbar_SearchFormInput__20mjM\"};"],"sourceRoot":""}